<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scalre=1.0"/>
    <title>Your Personalized Workout Plan!</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <a href="/" class="back"><< back</a>
    <h1>Your {{ num_days }}-day plan ({{ difficulty }})</h1>
    {% if error %}
  <p class="error">{{ error }}</p>
{% endif %}

{% if not plan %}
  <p>No plan yet. Try a prompt like:
    <em>“4-day intermediate, can’t lift Tuesdays, dumbbells only.”</em>
  </p>
{% else %}
  {% for day in plan %}
    {% if day is string %}

      <section class="day">
        <h3>Day {{ loop.index }} — {{ day|replace('_',' ')|title }}</h3>
        {% if day|lower == 'rest' %}
          <p class="muted">Rest day 😴</p>
        {% else %}
          <p class="muted">Exercises loading… (update backend to return dicts for details)</p>
        {% endif %}
      </section>
    {% else %}

      <section class="day">
        <h3>Day {{ day.day }} — {{ day.split|replace('_',' ')|title }}</h3>

        {% if day.split|lower == 'rest' or not day.exercises %}
          <p class="muted">Rest day 😴</p>
        {% else %}
          <ul class="exercise-list">
            {% for ex in day.exercises %}
              <li>
                <strong>{{ ex.name }}</strong>
                <small>
                  ({{ ex.muscle|replace('_',' ') }},
                  {{ ex.equipment }},
                  {{ ex.difficulty }})
                </small>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </section>
    {% endif %}
  {% endfor %}
{% endif %}